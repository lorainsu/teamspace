<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />

<script src="js/jquery-1.9.1.min.js"></script>
<script src="js/Myjs.js"></script>

<script src="js/bootstrap-table.js"></script>
<script src="js/bootstrap-table-zh-CN.min.js"></script>

<link href="css/bootstrap-table.min.css" rel="stylesheet" />
<link href="css/bootstrap.css" rel="stylesheet" />
</head>

<body>
    <div class="panel panel-default" id="top_search" style="border: 0px; padding: 0px;">
        <div class="panel-body form-group" style="margin-top: 20px; border: 0px; padding: 0px; height: 0px">

            <form id="search_form" onsubmit="return false" action="##" method="post">
                <label class="col-sm-1 control-label" style="text-align: right; width: 110px; font-size: 16px">行业:</label>
                <div class="col-sm-2" style="width: 130px">
                    <select class="form-control" name="search_industry" id="search_industry" style="width: 130px; font-size: 14px">
                        <option value=""></option>
                        <option value="公共安全">公共安全</option>
                        <option value="平安城市">平安城市</option>
                        <option value="智慧城市">智慧城市</option>
                        <option value="交通运输">交通运输</option>
                        <option value="教育传媒">教育传媒</option>
                        <option value="政府">政府</option>
                        <option value="企业">企业</option>
                        <option value="运营商">运营商</option>
                        <option value="金融">金融</option>
                        <option value="能源">能源</option>
                        <option value="农业">农业</option>
                        <option value="医疗">医疗</option>
                        <option value="其他">其他</option>
                    </select>
                </div>

                <label class="col-sm-1 control-label" style="text-align: right; width: 130px; font-size: 16px">生态圈:</label>
                <div class="col-sm-2" style="width: 130px">
                    <select class="form-control" name="search_ecosphere" id="search_ecosphere" style="width: 130px; font-size: 14px">
                        <option value=""></option>
                        <option value="eLTE">eLTE</option>
                        <option value="IoT">IoT</option>
                        <option value="PaaS">PaaS</option>
                        <option value="视频">视频</option>
                        <option value="大数据">大数据</option>
                        <option value="云计算">云计算</option>
                        <option value="企业云通信">企业云通信</option>
                        <option value="企业移动安全">企业移动安全</option>
                        <option value="其他">其他</option>
                    </select>
                </div>

                <label class="col-sm-1 control-label" style="text-align: right; width: 150px; font-size: 16px">所属产品:</label>
                <div class="col-sm-2" style="width: 130px">
                    <select class="form-control" name="search_product" id="search_product" style="width: 130px; font-size: 14px">
                        <option value=""></option>
                        <option value="EC30">EC3.0</option>
                        <option value="EC60">EC6.0</option>
                        <option value="UC">UC</option>
                        <option value="eLTE">eLTE</option>
                        <option value="SMC">SMC</option>
                        <option value="TE">TE</option>
                        <option value="ICP">ICP</option>
                        <option value="IPCC">IPCC</option>
                        <option value="VCN">VCN</option>
                        <option value="VCM">VCM</option>
                        <option value="FusionCompute">FusionCompute</option>
                        <option value="FusionInsightHD">FusionInsight HD</option>
                        <option value="FusionManager">FusionManager</option>
                        <option value="FusionSphere">FusionSphere</option>
                        <option value="FusionStage">FusionStage</option>
                        <option value="ManageOne">ManageOne</option>
                        <option value="OceanStor">OceanStor</option>
                        <option value="OBS">OBS</option>
                        <option value="AgentLite_OceanConnect">AgentLite&OceanConnect</option>
                        <option value="NBIoT_OceanConnect">NBIoT&OceanConnect</option>
                        <option value="AnyOffice">AnyOffice</option>
                        <option value="Controller">Controller</option>
                        <option value="其他">其他</option>
                    </select>
                </div>

                <label class="col-sm-1 control-label" style="text-align: right; width: 150px; font-size: 16px">项目开始时间:</label>
                <div class="col-sm-2" style="width: 180px">
                    <input type="text" class="form-control" name="search_start_time" id="search_start_time" style="width: 160px" />
                </div>
                <label class="col-sm-1 control-label" style="text-align: right; width: 150px; font-size: 16px">项目结束时间:</label>
                <div class="col-sm-2" style="width: 180px">
                    <input type="text" class="form-control" name="search_end_time" id="search_end_time" style="width: 160px" />
                </div>
                <br />
                <br />
                <br />
                <label class="col-sm-1 control-label" style="text-align: right; margin-top: 10px; width: 110px; font-size: 16px">项目名称:</label>
                <div class="col-sm-2" style="width: 130px">
                    <input type="text" class="form-control" name="search_proj_name" id="search_proj_name" style="width: 130px" />
                </div>
                <label class="col-sm-1 control-label" style="text-align: right; margin-top: 10px; width: 130px; font-size: 16px">ISV:</label>
                <div class="col-sm-2" style="width: 130px">
                    <input type="text" class="form-control" name="search_isv" id="search_isv" style="width: 130px" />
                </div>
                <label class="col-sm-1 control-label" style="text-align: right; margin-top: 10px; width: 150px; font-size: 16px">eSDK支持人员:</label>
                <div class="col-sm-2" style="width: 130px">
                    <input type="text" class="form-control" name="search_esdk_liaison" id="search_esdk_liaison" style="width: 130px" />
                </div>
                <label class="col-sm-1 control-label" style="text-align: right; margin-top: 10px; width: 150px; font-size: 16px">重点项目:</label>
                <div class="col-sm-2" style="width: 70px">
                    <select class="form-control" name="search_key_proj" id="search_key_proj" style="width: 70px; font-size: 14px">
                        <option value=""></option>
                        <option value="1">是</option>
                        <option value="0">否</option>
                    </select>
                </div>
            </form>

            <div class="col-sm-2" style="margin-left: 10px; width: 130px">
                <button class="btn btn-primary" id="search_btn" style="width: 110px; height: 40px; font-size: 20px; margin-left: 40px"
                    onclick="search_row()">查询</button>
            </div>
            <div class="col-sm-2" style="width: 130px">
                <button class="btn btn-primary" id="add_btn" style="width: 110px; height: 40px; font-size: 20px; margin-left: 40px"
                    onclick="to_add_tab()">添加</button>
            </div>
            <div class="col-sm-2" style="width: 130px">
                <button class="btn btn-primary" id="export_btn" style="width: 110px; height: 40px; font-size: 20px; margin-left: 40px"
                    onclick="export_tab()">数据导出</button>
            </div>
            <br />
            <br />
            <br />
            <br />
            <table id="project_tab" class="table table-hover" style="font-size: 18px">
            </table>
        </div>
    </div>
    <br />


    <div id="top_progress" style="display: none">
        <div class="panel-heading" style="height: 70px">
            <center>
                <span class="h2" id="progress_proj_name"> </span>
            </center>
        </div>
        <table id="progress_tab" class="table table-hover" style="display: none; font-size: 18px" />
        <hr />
        <form id="add_progress_form" onsubmit="return false" action="##" method="post">
            <input id="proj_id" name="proj_id" type="hidden"></input>
            <table>
                <tr>
                    <td>
                        <div class="col-sm-2" style="margin-left: 200px">
                            <textarea name="content" id="content" class="form-control" style="height: 80px; width: 1030px;"></textarea>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>
                        <div>
                            <br />
                            <center>
                                <input type="button" value="新增记录" class="btn btn-primary" id="add_progress_btn"
                                    style="margin-left: 200px; width: 150px; height: 40px; font-size: 20px;" onclick="return add_progress(this.form);" />
                                <input type="button" value="返回" id="return_1" class="btn btn-primary"
                                    style="margin-left: 120px; width: 150px; height: 40px; font-size: 20px;" onclick="returnpage();" />
                            </center>
                        </div>
                    </td>
                </tr>
            </table>
        </form>
        <hr />
    </div>

    <div id="top_project_update" style="display: none">
        <div class="panel-heading" style="height: 70px">
            <center>
                <span class="h2" id="project_name_update"> </span>
            </center>
        </div>
        <form id="project_form" onsubmit="return false" action="##" method="post">
            <input id="id" name="id" type="hidden"></input>
            <table id="detail_tab" class="table table-hover" style="display: none">
                <tr>
                    <td>
                        <div class="input-group" style="border: 0">
                            <span class="input-group-addon" style="font-size: 16px; width: 150px">行业*</span>
                            <select class="form-control" name="industry" id="industry" style="height: 40px; font-size: 16px; width: 333px">
                                <option onclick="selectClick()" value=""></option>
                                <option onclick="selectClick()" value="公共安全">公共安全</option>
                                <option onclick="selectClick()" value="平安城市">平安城市</option>
                                <option onclick="selectClick()" value="智慧城市">智慧城市</option>
                                <option onclick="selectClick()" value="交通运输">交通运输</option>
                                <option onclick="selectClick()" value="教育传媒">教育传媒</option>
                                <option onclick="selectClick()" value="政府">政府</option>
                                <option onclick="selectClick()" value="企业">企业</option>
                                <option onclick="selectClick()" value="运营商">运营商</option>
                                <option onclick="selectClick()" value="金融">金融</option>
                                <option onclick="selectClick()" value="能源">能源</option>
                                <option onclick="selectClick()" value="农业">农业</option>
                                <option onclick="selectClick()" value="医疗">医疗</option>
                                <option onclick="selectClick()" value="其他">其他</option>
                            </select>
                            <span class="input-group-addon" style="font-size: 16px; width: 150px">生态圈*</span>
                            <select class="form-control" name="ecosphere" id="ecosphere" style="height: 40px; font-size: 16px; width: 333px">
                                <option value=""></option>
                                <option value="eLTE">eLTE</option>
                                <option value="IoT">IoT</option>
                                <option value="PaaS">PaaS</option>
                                <option value="视频">视频</option>
                                <option value="大数据">大数据</option>
                                <option value="云计算">云计算</option>
                                <option value="企业云通信">企业云通信</option>
                                <option value="企业移动安全">企业移动安全</option>
                                <option value="其他">其他</option>
                            </select>
                            <span class="input-group-addon" style="font-size: 16px; width: 150px">所属产品*</span>
                            <select class="form-control" name="product" id="product" style="height: 40px; font-size: 16px; width: 177px">
                                <option value="EC30">EC3.0</option>
                                <option value="EC60">EC6.0</option>
                                <option value="UC">UC</option>
                                <option value="eLTE">eLTE</option>
                                <option value="SMC">SMC</option>
                                <option value="TE">TE</option>
                                <option value="ICP">ICP</option>
                                <option value="IPCC">IPCC</option>
                                <option value="VCN">VCN</option>
                                <option value="VCM">VCM</option>
                                <option value="FusionCompute">FusionCompute</option>
                                <option value="FusionInsightHD">FusionInsight HD</option>
                                <option value="FusionManager">FusionManager</option>
                                <option value="FusionSphere">FusionSphere</option>
                                <option value="FusionStage">FusionStage</option>
                                <option value="ManageOne">ManageOne</option>
                                <option value="OceanStor">OceanStor</option>
                                <option value="OBS">OBS</option>
                                <option value="AgentLite_OceanConnect">AgentLite&OceanConnect</option>
                                <option value="NBIoT_OceanConnect">NBIoT&OceanConnect</option>
                                <option value="AnyOffice">AnyOffice</option>
                                <option value="Controller">Controller</option>
                                <option value="其他">其他</option>
                            </select>

                            <span class="input-group-addon" style="font-size: 16px; width: 90px">重点项目</span>
                            <select class="form-control" name="key_proj" id="key_proj" style="height: 40px; font-size: 16px; width: 65px">
                                <option value=""></option>
                                <option value="0">否</option>
                                <option value="1">是</option>
                            </select>
                        </div>
                    </td>
                </tr>

                <tr>
                    <td>
                        <div class="input-group" style="border: 0">
                            <span class="input-group-addon" style="font-size: 16px; width: 150px">项目名称*</span>
                            <input name="proj_name" id="proj_name" type="text" style="height: 40px; font-size: 16px; width: 333px"
                                class="form-control" />
                            <span class="input-group-addon" style="font-size: 16px; width: 150px">ISV*</span>
                            <input name="isv" id="isv" type="text" style="height: 40px; font-size: 16px; width: 333px" class="form-control" />
                            <span class="input-group-addon" style="font-size: 16px; width: 150px">eSDK支持人员*</span>
                            <input name="esdk_liaison" id="esdk_liaison" type="text" style="height: 40px; font-size: 16px; width: 333px"
                                class="form-control" />
                        </div>
                    </td>
                </tr>

                <tr>
                    <td>
                        <div class="input-group" style="border: 0">
                            <span class="input-group-addon" style="font-size: 16px; width: 150px">项目金额</span>
                            <input name="amount" id="amount" type="text" style="height: 40px; font-size: 16px; width: 333px" class="form-control" />
                            <span class="input-group-addon" style="font-size: 16px; width: 150px">交付时间</span>
                            <input name="delivery_time" id="delivery_time" type="text" style="height: 40px; font-size: 16px; width: 333px"
                                class="form-control" />
                            <span class="input-group-addon" style="font-size: 16px; width: 150px">一线支持进展</span>
                            <select name="proj_status" id="proj_status" style="height: 40px; font-size: 16px; width: 333px" class="form-control">
                                <option value=""></option>
                                <option value="产品体验">产品体验</option>
                                <option value="前期交流">前期交流</option>
                                <option value="技术咨询">技术咨询</option>
                                <option value="开发对接">开发对接</option>
                                <option value="功能验证">功能验证</option>
                                <option value="项目交付">项目交付</option>
                                <option value="产品升级">产品升级</option>
                                <option value="运维阶段">运维阶段</option>
                                <option value="未知">未知</option>
                            </select>
                        </div>
                    </td>
                </tr>

                <tr>
                    <td>
                        <div class="input-group" style="border: 0">
                            <span class="input-group-addon" style="font-size: 16px; width: 150px">项目接口人</span>
                            <input name="liaison" id="liaison" type="text" style="height: 40px; font-size: 16px; width: 333px" class="form-control" />
                            <span class="input-group-addon" style="font-size: 16px; width: 150px">电话</span>
                            <input name="liaison_tel" id="liaison_tel" type="text" style="height: 40px; font-size: 16px; width: 333px"
                                class="form-control" />
                            <span class="input-group-addon" style="font-size: 16px; width: 150px">邮箱</span>
                            <input name="liaison_email" id="liaison_email" type="text" style="height: 40px; font-size: 16px; width: 333px"
                                class="form-control" />
                        </div>
                    </td>
                </tr>

                <tr>
                    <td>
                        <div class="input-group" style="border: 0">
                            <span class="input-group-addon" style="font-size: 16px; width: 150px">我司接口部门</span>
                            <input name="huawei_liaison_dept" id="huawei_liaison_dept" type="text" style="height: 40px; font-size: 16px; width: 333px"
                                class="form-control" />
                            <span class="input-group-addon" style="font-size: 16px; width: 150px">我司接口人</span>
                            <input name="huawei_liaison" id="huawei_liaison" type="text" style="height: 40px; font-size: 16px; width: 333px"
                                class="form-control" />
                            <span class="input-group-addon" style="font-size: 16px; width: 150px">SPP状态</span>
                            <input name="spp_status" id="spp_status" type="text" style="height: 40px; font-size: 16px; width: 333px"
                                class="form-control" />
                        </div>
                    </td>
                </tr>

                <tr>
                    <td>
                        <div class="input-group" style="border: 0">
                            <span class="input-group-addon" style="font-size: 16px; width: 150px">项目开始时间</span>
                            <input name="start_time" id="start_time" type="text" style="height: 40px; font-size: 16px; width: 333px"
                                class="form-control" />
                            <span class="input-group-addon" style="font-size: 16px; width: 150px">项目结束时间</span>
                            <input name="end_time" id="end_time" type="text" style="height: 40px; font-size: 16px; width: 333px" class="form-control" />
                            <span class="input-group-addon" style="font-size: 16px; width: 150px">SPP解决方案</span>
                            <input name="spp_solution" id="spp_solution" type="text" style="height: 40px; font-size: 16px; width: 333px"
                                class="form-control" />
                        </div>
                    </td>
                </tr>

                <tr>
                    <td>
                        <div class="input-group" style="border: 0">
                            <span class="input-group-addon" style="font-size: 16px; width: 150px">调用能力</span>
                            <textarea name="ability" id="ability" class="form-control" style="height: 120px; width: 333px"></textarea>
                            <span class="input-group-addon" style="font-size: 16px; width: 150px">项目背景</span>
                            <textarea name="proj_background" id="proj_background" class="form-control" style="height: 120px; width: 333px"></textarea>
                            <span class="input-group-addon" style="font-size: 16px; width: 150px">需求描述</span>
                            <textarea name="requirement" id="requirement" class="form-control" style="height: 120px; width: 333px"></textarea>
                        </div>
                    </td>
                </tr>

                <tr>
                    <td>
                        <div class="input-group" style="border: 0">
                            <span class="input-group-addon" style="font-size: 16px; width: 150px">备注</span>
                            <textarea name="remark" id="remark" class="form-control" style="height: 120px; width: 1298px"></textarea>
                        </div>
                    </td>
                </tr>

                <tr>
                    <td align="center">
                        <div class="input-group" style="border: 0">
                            <input type="button" value="修改" id="edit_button" class="btn btn-primary"
                                style="width: 130px; height: 40px; font-size: 20px" onclick="return edit_project(this.form);" />
                            <input type="button" value="添加" id="add_button" class="btn btn-primary"
                                style="width: 130px; height: 40px; font-size: 20px" onclick="return add_project(this.form);" />
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <input type="button" value="返回" id="return" class="btn btn-primary" style="width: 130px; height: 40px; font-size: 20px"
                                onclick="returnpage();" />
                        </div>
                    </td>
                </tr>
            </table>
        </form>
    </div>


    <script>
					//初始化页面内容
					$(function() {
						$('#project_tab').bootstrapTable({
							method : 'post',
							contentType : "application/x-www-form-urlencoded",
							url : "project/query",
							dataType : 'json',
							striped : true, //是否显示行间隔色
							pagination : true,//是否分页
							sidePagination : "server",
							sortable : true, //是否启用排序
							sortName : 'id',
							sortOrder : 'asc', //排序方式
							queryParamsType : '',//查询参数组织方式
							queryParams : queryParams,//请求服务器时所传的参数
							sidePagination : "server", //分页方式：client客户端分页，server服务端分页（*）
							pageNumber : 1, //初始化加载第一页，默认第一页
							pageSize : 10, //每页的记录行数（*）
							pageList : [ 10, 20, 30 ], //可供选择的每页的行数（*）
							clickToSelect : true,//是否启用点击选中行
							buttonsAlign : 'right',//按钮对齐方式
							columns : [ {
								field : 'id',
								title : 'ID',
								visible : false,
								width : 50,
								align : 'center'
							}, {
								field : 'industry',
								title : '行业',
								width : 100,
								align : 'center'
							}, {
								title : '生态圈',
								field : 'ecosphere',
								width : 100,
								align : 'center'
							}, {
								title : '所属产品',
								field : 'product',
								align : 'center',
								width : 100
							}, {
								title : '项目名称',
								field : 'proj_name',
								width : 200,
								align : 'center'
							}, {
								title : 'ISV',
								field : 'isv',
								width : 150,
								align : 'center'
							}, {
								title : 'eSDK支持人员',
								field : 'esdk_liaison',
								width : 150,
								align : 'center'
							}, {
								title : '操作',
								formatter : operateFormatter,
								align : 'center',
								width : 100
							} ],
							onLoadSuccess : function() {
							},
							onLoadError : function() {
								showTips("数据加载失败！");
							},
							locale : 'zh-CN',//中文支持
						})

						//请求服务数据时所传参数
						function queryParams(params) {
							return {
								pageNo : params.pageNumber,
								pageSize : params.pageSize,

								industry : $('#search_industry').val(),
								ecosphere : $('#search_ecosphere').val(),
								product : $('#search_product').val(),
								proj_name : $('#search_proj_name').val(),
								isv : $('#search_isv').val(),
								esdk_liaison : $('#search_esdk_liaison').val(),
								start_time : $('#search_start_time').val(),
								end_time : $('#search_end_time').val(),
								key_proj : $('#search_key_proj').val(),

								sortOrder : this.sortName,//排序
								sortName : this.sortOrder
							//排序字段
							}
						}

						//初始化操作列
						function operateFormatter(value, row, index) {
							var editDef = "<button class=\"btn btn-primary btn-xs\" id=\"to_edit\"style=\"width:60px;height:40px;font-size:18px\" onclick=\"javascript:to_edit_tab('"
									+ row['id']
									+ "','"
									+ row['proj_name']
									+ "');\">编辑</button>   <button class=\"btn btn-primary btn-xs\" id=\"showprogress\"style=\"width:60px;height:40px;font-size:18px\" onclick=\"javascript:show_progress('"
									+ row['id']
									+ "','"
									+ row['proj_name']
									+ "');\">进度</button>";
							return editDef;
						}

						$('#search_btn').click(function() {
							$('#project_tab').bootstrapTable('refresh', {
								url : 'project/query'
							});
						})
					})

					//初始化日期组件
					laydate.render({
						elem : '#start_time'
					});

					laydate.render({
						elem : '#end_time'
					});

					laydate.render({
						elem : '#search_start_time'
					});

					laydate.render({
						elem : '#search_end_time'
					});

					var start_time_is_null = ""
					var end_time_is_null = ""
				</script>
</body>
</html>
